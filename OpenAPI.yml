openapi: '3.0.3'
info:
  title: 'Project#2 Alta-BE4: Airbnb App'
  version: '1.0'
  description: 'OpenAPI for Airbnb App'
  contact: 
    name: Moch. Syahryil Mahendra
    email: nurilhuda7337@gmail.com
    url: https://github.com/sahrilmahendra
servers:
  - url: https://{environment}.server.test/api/v1
    description: Airbnb App servers
    variables:
      environment:
        default: dev
        enum: [
          dev,
          prod
        ]
externalDocs: 
  description: "Repository Github Project#2 Airbnb App"
  url: https://github.com/sahrilmahendra/project2-airbnb
paths:
  /login:
    post:
      tags:
        - Authentication
      summary: Get access to account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: nurilhuda7337@gmail.com
                password:
                  type: string
                  example: 12345
            example:
              email: supriadi15001@gmail.com
              password: qwerty
      responses: 
        '200':
          description: Login Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Login Success
                  Data:
                    type: string
                    example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdXRob3JpemVkIjp0cnVlLCJleHAiOjE2MzgxOTUwMDksInVzZXJJZCI6MX0.0gso_gffYqaDGmCTqYClvhaNZZdbe7FbV7hJ02lOpoQ
        '400':
          description: Login Failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Login Failed      
  /users:
    post:
      tags:
        - Users
      summary: Create a new account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: Moch. Syahryil Mahendra
                email:
                  type: string
                  example: sahrilmahendra@gmail.com
                password:
                  type: string
                  example: qwerty
            example:
              name: Supriadi
              email: supriadi15001@gmail.com
              password: qwerty
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
  /users/{id}:
    get:
      tags:
        - Users
      summary: Get user by id
      parameters:
        - name: id
          in: path
          required: true 
          schema:
            type: number
            example: 1 
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Data:
                    type: object
                    properties:
                      ID:
                        type: number
                        example: 2
                      Name:
                        type: string
                        example: Nuril Huda
                      Email:
                        type: string
                        example: nurilhuda7337@gmail.com
                  Message:
                    type: string
                    example: Successfull Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request 
        '415':
          description: False Param
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 415
                  Message:
                    type: string
                    example: False Param
    put:
      tags:
        - Users
      summary: Update user by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                name:
                  type: string
                  example: Sahril Mahendra
                email:
                  type: string
                  example: m.sahril@gmail.com
                password:
                  type: string
                  example: newqwerty
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
              example:
                Code: 200
                Message: Successful operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
        '403':
          description: Access Forbidden 
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Access Forbidden 
    delete:
      tags:
        - Users
      summary: Delete user by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
            default: 1
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
              example:
                Code: 200
                Message: Successful operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
        '403':
          description: Access Forbidden 
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 403
                  Message:
                    type: string
                    example: Access Forbidden 
  /homestay:
    post:
      tags:
        - Homestay
      summary: Create a new homestay
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name_homestay:
                  type: string
                  example: Rumah Jendela
                price:
                  type: number
                  example: 1300000
                description:
                  type: string
                  example: We serve the best our place for your satisfaction
                address:
                  type: string
                  example: Dago Atas, Bandung
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
    get:
      tags:
      - Homestay
      summary: Get all homestays
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    Code:
                      type: number
                      example: 200
                    Data:
                      type: object
                      properties:
                        ID:
                          type: number
                          example: 1
                        Name_Homestay:
                          type: string
                          example: Rumah Jendela
                        Price:
                          type: number
                          example: 1300000
                        Description:
                          type: string
                          example: We serve the best our place for your satisfaction
                        Address:
                          type: string
                          example: Dago, Bandung
                        Latitude:
                          type: number
                          example: -6.877258
                        Longitude:
                          type: number
                          example: 107.617412
                    Message:
                      type: string
                      example: Succesful Operation      
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request 
  /homestay/{id}:
    get:
      tags:
        - Homestay
      summary: Get homestay by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
            example: 1
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Data:
                    type: object
                    properties:
                      ID:
                        type: number
                        example: 1
                      Name_Homestay:
                        type: string
                        example: Rumah Jendela
                      Price:
                        type: number
                        example: 1370523
                      Description:
                        type: string
                        example: We serve the best our place for your satisfaction
                      Address:
                        type: string
                        example: Dago, Bandung
                      Latitude:
                        type: number
                        example: -6.877258
                      Longitude:
                        type: number
                        example: 107.617412
                  Message:
                    type: string
                    example: Succesful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
        '415':
          description: False Param
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 415
                  Message:
                    type: string
                    example: False Param
    put:
      tags:
        - Homestay
      summary: Update homestay by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                name_homestay:
                  type: string
                  example: Rumah Kaca
                price:
                  type: number
                  example: 1200000
                description:
                  type: string
                  example: Fresh and cool
                address:
                  type: string
                  example: Lembang, Bandung
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
        '403':
          description: Access Forbidden 
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 403
                  Message:
                    type: string
                    example: Access Forbidden
        '415':
          description: False Param
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 415
                  Message:
                    type: string
                    example: False Param
    delete:
      tags:
      - Homestay
      summary: Delete homestay by id
      parameters:
        - name: id
          in: path
          required: true 
          schema:
            type: number
            example: 1
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: False Param
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: False Param
        '403':
          description: Access Forbidden 
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 403
                  Message:
                    type: string
                    example: Access Forbidden
  /homestay/facilities:
    post:
      tags:
      - Homestay Facilities
      summary: Create a homestay facility
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                homestay_id:
                  type: number
                  example: 1
                facility_id:
                  type: number
                  example: 1
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
  /homestay/facilities/{id}:
    put:
      tags:
      - Homestay Facilities
      summary: Update homestay facility by id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: number
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                homestay_id:
                  type: number
                  example: 2
                facility_id:
                  type: number
                  example: 2
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
        '415':
          description: False Param 
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 415
                  Message:
                    type: string
                    example: False Param       
    delete:
      tags:
        - Homestay Facilities
      summary: Delete homestay facility by id
      parameters:
        - name: id
          in: path
          required: true 
          schema:
            type: number
            example: 1
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: False Param
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: False Param
        '403':
          description: Access Forbidden 
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 403
                  Message:
                    type: string
                    example: Access Forbidden
  /reservations/check:
    post:
      tags:
        - Reservations
      summary: Check. is homestay available?
      requestBody:
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                homestay_id:
                  type: number
                  example: 1
                start_date:
                  type: string
                  example: "2021-11-30"
                end_date:
                  type: string
                  example: "2021-12-01"
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Available
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
  /reservations:
    post:
      tags:
      - Reservations
      summary: Create a new reservation
      requestBody:
        required: true
        content:
          application/json:
            schema:  
              type: object
              properties:
                homestay_id:
                  type: number
                  example: 1
                start_date:
                  type: string
                  example: "2021-11-30"
                end_date:
                  type: string
                  example: "2021-12-01"
                credit_card:
                  type: object
                  properties:
                    typ:
                      type: string
                      example: Master Card
                    name:
                      type: string
                      example: Supriadi
                    number:
                      type: string
                      example: 1000-1000-1000-1000
                    cvv:
                      type: number
                      example: 10101
                    month:
                      type: number
                      example: 1
                    year:
                      type: number
                      example: 21
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 200
                  Message:
                    type: string
                    example: Successful Operation
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request
    get:
      tags:
      - Reservations
      summary: Get all reservations
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    Code:
                      type: number
                      example: 200
                    Data:
                      type: object
                      properties:
                        UserID:
                          type: number
                          example: 1
                        HomestayID:
                          type: number
                          example: 1
                        Name_Homestay:
                          type: string
                          example: Rumah Jendela
                        Start_date:
                          type: string
                          example: "2021-11-30"
                        End_date:
                          type: string
                          example: "2021-12-01"
                        Price:
                          type: number
                          example: 1300000
                        Total_harga:
                          type: number
                          example: 2600000
                    Message:
                      type: string
                      example: Succesful Operation      
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: number
                    example: 400
                  Message:
                    type: string
                    example: Bad Request